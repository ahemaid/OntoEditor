!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}({13:function(e,t,r){window.ShareDB.types.register(r(14).type)},14:function(e,t,r){e.exports={type:r(15)}},15:function(e,t){var r=e.exports={name:"text-tp2",tp2:!0,uri:"http://sharejs.org/types/text-tp2v1",create:function(e){if(null==e)e="";else if("string"!=typeof e)throw new Error("Initial data must be a string");return{charLength:e.length,totalLength:e.length,data:e.length?[e]:[]}},serialize:function(e){if(!e.data)throw new Error("invalid doc snapshot");return e.data},deserialize:function(e){var t=r.create();t.data=e;for(var n=0;n<e.length;n++){var o=e[n];"string"==typeof o?(t.charLength+=o.length,t.totalLength+=o.length):t.totalLength+=o}return t}},n=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},o=function(e){if(!n(e))throw new Error("Op must be an array of components");for(var t=null,r=0;r<e.length;r++){var o=e[r];if("object"==typeof o)if(void 0!==o.i){if(!("string"==typeof o.i&&o.i.length>0||"number"==typeof o.i&&o.i>0))throw new Error("Inserts must insert a string or a +ive number")}else{if(void 0===o.d)throw new Error("Operation component must define .i or .d");if(!("number"==typeof o.d&&o.d>0))throw new Error("Deletes must be a +ive number")}else{if("number"!=typeof o)throw new Error("Op components must be objects or numbers");if(o<=0)throw new Error("Skip components must be a positive number");if("number"==typeof t)throw new Error("Adjacent skip components should be combined")}t=o}},i=r._takeDoc=function(e,t,r,n){if(t.index>=e.data.length)throw new Error("Operation goes past the end of the document");var o,i=e.data[t.index];o="string"==typeof i?null!=r?i.slice(t.offset,t.offset+r):i.slice(t.offset):null==r||n?i-t.offset:Math.min(r,i-t.offset);var f=o.length||o;return(i.length||i)-t.offset>f?t.offset+=f:(t.index++,t.offset=0),o},f=r._appendDoc=function(e,t){if(0!==t&&""!==t){"string"==typeof t?(e.charLength+=t.length,e.totalLength+=t.length):e.totalLength+=t;var r=e.data;0===r.length?r.push(t):typeof r[r.length-1]==typeof t?r[r.length-1]+=t:r.push(t)}};r.apply=function(e,t){if(null==e.totalLength||null==e.charLength||!n(e.data))throw new Error("Snapshot is invalid");o(t);for(var l=r.create(),a={index:0,offset:0},u=0;u<t.length;u++){var s,h,p=t[u];if("number"==typeof p)for(s=p;s>0;)h=i(e,a,s),f(l,h),s-=h.length||h;else if(void 0!==p.i)f(l,p.i);else if(void 0!==p.d){for(s=p.d;s>0;)h=i(e,a,s),s-=h.length||h;f(l,p.d)}}return l};var l=r._append=function(e,t){var r;0===t||""===t.i||0===t.i||0===t.d||(0===e.length?e.push(t):(r=e[e.length-1],"number"==typeof t&&"number"==typeof r?e[e.length-1]+=t:null!=t.i&&null!=r.i&&typeof r.i==typeof t.i?r.i+=t.i:null!=t.d&&null!=r.d?r.d+=t.d:e.push(t)))},a=function(e,t,r,n){if(t.index===e.length)return null;var o,i,f=e[t.index],l=t.offset;if("number"==typeof(o=f)||"number"==typeof(o=f.i)||null!=(o=f.d)){var a;return null==r||o-l<=r||n&&null!=f.i?(a=o-l,++t.index,t.offset=0):(t.offset+=r,a=r),null!=f.i?{i:a}:null!=f.d?{d:a}:a}return null==r||f.i.length-l<=r||n?(i={i:f.i.slice(l)},++t.index,t.offset=0):(i={i:f.i.slice(l,l+r)},t.offset+=r),i},u=function(e){return"number"==typeof e?e:"string"==typeof e.i?e.i.length:e.d||e.i};r.normalize=function(e){for(var t=[],r=0;r<e.length;r++)l(t,e[r]);return t};var s=function(e,t,r,n){o(e),o(t);for(var i=[],f={index:0,offset:0},s=0;s<t.length;s++){var h,p=t[s],d=u(p);if(null!=p.i)if(r){if("left"===n)for(var c;(c=e[f.index])&&null!=c.i;)l(i,a(e,f));l(i,d)}else for(;d>0;){if(null===(h=a(e,f,d,!0)))throw new Error("The transformed op is invalid");if(null!=h.d)throw new Error("The transformed op deletes locally inserted characters - it cannot be purged of the insert.");"number"==typeof h?d-=h:l(i,h)}else for(;d>0;){if(null===(h=a(e,f,d,!0)))throw new Error("The op traverses more elements than the document has");l(i,h),h.i||(d-=u(h))}}for(var p;p=a(e,f);){if(void 0===p.i)throw new Error("Remaining fragments in the op: "+p);l(i,p)}return i};r.transform=function(e,t,r){if("left"!=r&&"right"!=r)throw new Error("side ("+r+") should be 'left' or 'right'");return s(e,t,!0,r)},r.prune=function(e,t){return s(e,t,!1)},r.compose=function(e,t){if(null==e)return t;o(e),o(t);for(var r,n=[],i={index:0,offset:0},f=0;f<t.length;f++){r=t[f];var s,h;if("number"==typeof r)for(s=r;s>0;){if(null===(h=a(e,i,s)))throw new Error("The op traverses more elements than the document has");l(n,h),s-=u(h)}else if(void 0!==r.i)l(n,{i:r.i});else for(s=r.d;s>0;){if(null===(h=a(e,i,s)))throw new Error("The op traverses more elements than the document has");var p=u(h);void 0!==h.i?l(n,{i:p}):l(n,{d:p}),s-=p}}for(;r=a(e,i);){if(void 0===r.i)throw new Error("Remaining fragments in op1: "+r);l(n,r)}return n}}});